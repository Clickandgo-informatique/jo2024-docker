{% extends 'base.html.twig' %}

{% block title %}Simulation de paiement
{% endblock %}

{% block body %}
	<div class="container mt-5">
		<h1>üí≥ Simulation de paiement</h1>

		<p>
			Commande #{{ commande.id }}
			‚Äì Montant :
			<strong>{{ commande.totalCommande|number_format(2, ',', ' ') }}
				‚Ç¨</strong>
		</p>

		{# --- Formulaire de paiement mock --- #}
		{{ form_start(form) }}

		<div class="mb-3">
			{{ form_label(form.paymentMethod) }}
			{{ form_widget(form.paymentMethod) }}
		</div>

		{# Champs de carte masqu√©s par d√©faut, affich√©s seulement si CB/Visa/Mastercard s√©lectionn√©e #}
		<div id="card-info" style="display:none;">
			{{ form_row(form.cardHolder) }}
			{{ form_row(form.cardNumber) }}
		</div>

		{{ form_row(form.submit) }}
		{{ form_end(form) }}
	</div>

	<script>
		// --- JS : toggle des champs de carte selon le moyen de paiement ---
const methodInputs = document.querySelectorAll('input[name="paymentType[paymentMethod]"]');
const cardInfo = document.getElementById('card-info');

function toggleCardFields() {
const selected = document.querySelector('input[name="paymentType[paymentMethod]"]:checked');
if (selected && ['cb', 'mastercard', 'visa'].includes(selected.value)) {
cardInfo.style.display = 'block';
} else {
cardInfo.style.display = 'none';
}
}

// √âv√©nement change sur tous les inputs pour mettre √† jour l‚Äôaffichage
methodInputs.forEach(input => input.addEventListener('change', toggleCardFields));

// Initialisation au chargement de la page
toggleCardFields();
	</script>
{% endblock %}
