{% extends 'base.html.twig' %}
{% block title %}
	Liste des utilisateurs
{% endblock %}
{% block body %}

	<h1 class="text-center">
		<i class="fa-solid fa-users"></i>Liste des utilisateurs</h1>
	{% if utilisateurs %}
		<form class="search-form">
			<div class="search-container">
				<input type="search" class="search-input" placeholder="Rechercher par pseudo, nom ou prénom">
				<button type="submit" class="search-button">
					<i class="fa-solid fa-magnifying-glass"></i>
				</button>
			</div>
		</form>

		<table>
			<thead>
				<tr>
					<th></th>
					<th scope="col">Pseudo</th>
					<th scope="col">Email</th>
					<th scope="col">Vérifié</th>
					<th scope="col">Rôles</th>
					<th scope="col">Crée le</th>
					<th></th>
				</tr>
			</thead>

			<tbody>
				{% for u in utilisateurs %}
					<tr>
						<td class="text-center">
							<a class="btn-action btn-primary btn-open" href="{{path('app_utilisateurs_edit',{id:u.id})}}">
								<i class="fa-solid fa-pen-to-square"></i>
							</a>
						</td>

						<td>
							<strong>{{u.nickname}}</strong>
						</td>
						<td>{{u.email}}</td>
						<td class="text-center">{{u.isVerified ? '<span class="text-green"><i class="fa-solid fa-check"></i>Oui</span>':'<span class="text-red"><i class="fa-regular fa-circle-xmark"></i>Non</span>'}}
						</td>
						<td>
							{% for r in u.roles %}
								{{r|join(', ')}}
							{% endfor %}
						</td>
						<td class="text-muted text-right">{{u.createdAt|date('d-m-Y à H:i:s')}}</td>
						<td class="text-center">
							<a class="btn-action btn-danger btn-delete" href="#">
								<i class="fa-solid fa-trash-can"></i>
							</a>
						</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
		<div class="pagination">
			{{ knp_pagination_render(utilisateurs) }}
		</div>
	{% else %}
		<p class="text-center">Il n'existe encore aucun utilisateur enregistré dans la base de données</p>
	{% endif %}

{% endblock %}
{% block stylesheets %}
	<link rel="stylesheet" href="{{asset('assets/css/table.css')}}">
	<link rel="stylesheet" href="{{asset('assets/css/form.css')}}">
{% endblock %}
